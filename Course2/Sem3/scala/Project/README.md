### Система контроля доступа для сотрудников

Сначала немного легенды. Пускай у нас есть большая 
компания, с кучей сотрудников и кучей помещений,
доступ к которым мы бы хотели уметь как-то 
ограничивать. Положим, есть сущность "комната" и сущность 
"сотрудник". Пускай у каждого сотрудника есть уровень 
доступа - он зависит от должности, которую занимает 
сотрудник в компании. Пусть каждая комната имеет свой 
минимальный уровень доступа, который должен быть 
присужден сотруднику, чтобы он мог войти в эту комнату
или выйти из нее. Заведем для каждого сотрудника 
пропуск - в него будет вшит уникальный сгенерированный
сервером токен, который будет считываться внутренним или 
внешним валидатором той или иной комнаты. Пусть каждый
валидатор знает id комнаты, к которой он прикручен, знает 
свой тип - на вход или на выход, и умеет отправлять на 
сервер запросы на предоставление пропуска сотруднику по его 
токену.

Естественно, нам бы также очень хотелось ввести несколько правил пропускного режима:
* Пропуск сотрудника должен нести токен, по которому 
можно узнать всю необходимую информацию о сотруднике
* Валидатор не может впустить или выпустить сотрудника,
если его уровень доступа недостаточен для этой комнаты
* Валидатор не может повторно впустить или выпустить 
одного и того же сотрудника, если перед этим не было 
успешного пропуска этого сотрудника в другую сторону

В таком случае можно спроектировать сервер компании, 
который будет хранить всю информацию о комнатах и
сотрудниках и полностью контролировать пропускной режим
сотрудников в те или иные помещения.

Я решил, что сервер должен позволять делать следующие операции:
* Регистрировать сотрудников
* Получать информацию о сотруднике по токену
* Увеличивать уровень доступа сотрудника по токену
* Удалять информацию о сотруднике по его токену (инвалидация пропуска)
* Регистрировать новое помещение
* Удалять информацию о помещении по его id
* Давать доступ или отказывать в доступе к входу или выходу
из комнаты по id комнаты и токену сотрудника на основании таблицы 
логов проходов


### Локальный запуск и тестирование

Для локального тестирования вам потребуется 
[docker-compose](https://docs.docker.com/compose/).
Чтобы сервер заработал локально на вашей машине 
* запустите Docker Desktop
* выполните команду ```docker-compose up -d``` в корневом каталоге 
проекта для развертывания контейнера с базой данных
* запустите сервер (файл [Application.scala](./src/main/scala/Application.scala))
* откройте [Swagger UI](http://localhost:8080/docs/) для тестирования работоспособности сервера
* тестируйте на здоровье! (запустите тесты или поиграйтесь с апишкой в Swagger UI)

P.S. В [docker-compose.yml](./docker-compose.yml) порт 5433 пробрасывается в контейнер с бд. Если
у вас этот порт уже под что-то занят, рекомендуется его освободить или, если вам лень это делать:
* в файле [application.conf](./src/main/resources/application.conf) измените строку ```database.url``` на
`````"jdbc:postgresql://localhost:X/employee_access_control_db"`````
* в файле [docker-compose.yml](./docker-compose.yml) измените проброс порта на ```X:5432```

где X - любой свободный порт, который вам не жалко.